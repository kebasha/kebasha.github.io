<html>    <head>    <title>JSP与Servlet</title>    <meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'><meta content='text/html; charset=utf-8' http-equiv='content-type' /><link href='/styles/github.css' rel='stylesheet' type='text/css' /><script src='/javascripts/highlight.pack.js' type='text/javascript'></script><link href='/images/kbasha.png' rel='shortcut icon'><link href='/stylesheets/style.css' rel='stylesheet' type='text/css' /><link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css' /><link href='/stylesheets/responsive.css' rel='stylesheet' type='text/css' /><link href="/stylesheets/nprogress.css" rel='stylesheet' type='text/css' /><link href="/stylesheets/duoshuo.css" rel='stylesheet' type='text/css' /><link href="/feed.xml" rel="alternate" type="application/rss+xml"><script src='/javascripts/jquery.js' type='text/javascript'></script><script src='/javascripts/jquery.particleground.min.js' type='text/javascript'></script><script src='/javascripts/nprogress.js' type='text/javascript'></script><script src='/javascripts/theater.js' type='text/javascript'></script><script src='/javascripts/app.js' type='text/javascript'></script><script>    hljs.initHighlightingOnLoad();    var duoshuoQuery = {short_name:"kbasha"};</script>    </head>    <body>        <header><div id="blog-desc">    If you want do, then do.</div></header><div id="main">    <div id="left">    <a id="head-pic" class="go-back-home" href="/"><img src="../images/kbasha.jpg" alt="Home" width="100" height="100"></a>    <p>克巴沙</p>        <ul id="titles" class="titles">                    </ul>    </div>    <div id="right">    <a id="scaner-pic" class="go-back-home" href="/"><img src="../images/kbasha_id.jpg" alt="Home" width="172" height="172"></a>    <p>关注公众号</p>            </div>        <div id='container'>                        <div class="block nav">    <ul>            <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_top" href="/about.html">About</a>        </li>            <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_top" href="/">Blog</a>        </li>        <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_blank" href="https://github.com/kebasha">GitHub</a>        </li>            </ul></div>            <section class="paging">      <div class="left">      <a href="index30.html">        ‹      </a>    </div>      <div class="right">      <a href="index32.html">        ›      </a>    </div>  </section><div class="content">    <section class='post'>        <h1>            JSP与Servlet            <div class='date'>2016-04-03 23:36:24</div>        </h1><p><strong><code>JSP转译成Servlet过程</code></strong></p><ul>  <li>1、客户端发出request请求</li>  <li>2、jsp container将jsp转译成servlet的源码</li>  <li>3、将产生的servlet源码经过编译后，并加载到内存中执行</li>  <li>4、把结果response到客户端</li></ul><blockquote><p style="text-indent:2em;">在执行jsp页面时，通常可以分为两个时期，转译时期和请求时期。转译时期：jsp页面转译成servlet类;请求时期：servlet类执行后，响应至客户端。当jsp页面在执行时，jsp container会做检查工作，如果发现jsp页面有更新修改时，jsp container才会再次编译jsp成servelt;如果jsp没有更新时，就直接执行页面所产生的servlet。很多人都会认为jsp的执行性能会比servlet差一些，其实执行性能上的差别只在第一次执行。因为jsp在执行第一次后，会被编译成servlet的类文件class，当再重复调用执行时，就直接执行第一次所产生的class.</p></blockquote><p><strong><code>JSP速度优化</code></strong></p><pre><strong>一、在servlet的init()方法中缓存数据</strong></pre><blockquote><p style="text-indent:2em;">当应用服务器初始化servlet实例之后，为客户端请求提供服务之前，它会调用这个servlet的init()方法。在一个servlet的生命周期中，init()方法只会被调用一次。通过在init()方法中缓存一些静态的数据或完成一些只需要执行一次的或耗时的操作，就可以大大地提高系统性能。</p></blockquote><p><strong>二、禁止servlet和jsp自动重载</strong></p><blockquote><p style="text-indent:2em;">servlet/jsp提供了一个实用的技术，即自动重载技术，它为开发人员提供了一个好的开发环境，当你改变servlet和jsp页面后而不必重启应用服务器。然而，这种技术在产品运行阶段对系统的资源是一个极大的损耗。</p></blockquote><p><strong>三、不要滥用HttpSession</strong></p><blockquote><p style="text-indent:2em;">在很多应用中，我们的程序需要保持客户端的状态，以便页面之间可以相互联系。但不幸的是由于http具有天生无状态性，从而无法保存客户端的状态。因此一般的应用服务器都提供了session来保存客户端的状态。在jsp应用服务器中，是通过httpsession对象来实现session的功能的，但在方便的同时，它也给系统带来了不小的负担。因为每当你获得或更新session时，系统要对它进行费时的序列化操作。你可以通过对httpsession的以下几种处理方式来提升系统的性能：<br>如果没有必要，就应该关闭jsp页面中对httpsession的缺省设置<br>&lt;%@ page session="false"%&gt;<br>不要在httpsession中存放大的数据对象<br>尽量将session的超时时间设短一点</p></blockquote><p><strong>四、将页面输出进行压缩</strong></p><blockquote><p style="text-indent:2em;">压缩是解决数据冗余的一个好的方法，特别是在网络带宽不够发送的今天。有的浏览器支持gzip进行来对html文件进行压缩，这种方法可以减少html文件的下载时间</p></blockquote><p><strong>五、使用线程池</strong></p><blockquote><p style="text-indent:2em;">应用服务器缺省地为每个不同的客户端请求创建一个线程进行处理，并为它们分派service()方法，service()方法调用完成后，与之相应的线程也随之撤消。由于创建和撤消线程会耗费一定的系统资源。</p></blockquote>                </section>            </div>                    </div></div>        <script>            jQuery(document).ready(function($) {                App.mapKeySupport();                App.initNProgress();                App.initDuoshuo();                App.initTheater();            });        </script>    </body>    <div id="particles">    <canvas class="pg-canvas"></canvas></div><script type="text/javascript">    var _hmt = _hmt || [];    (function() {      var hm = document.createElement("script");      hm.src = "//hm.baidu.com/hm.js?93757bc26a1b57b9c6a7771db256d254";      var s = document.getElementsByTagName("script")[0];       s.parentNode.insertBefore(hm, s);    })();    $(function(){        var $body = $("body");        $("#particles").css({                "width":$body.width(),                 "height":$body.height()            }).particleground({                lineColor: '#e0e0e0',                dotColor: '#EFEFEF',                lineColor: '#EFEFEF',                   minSpeedX :0.5,                maxSpeedX :1,                minSpeedY : 0.5,                maxSpeedY :1            });    });</script><footer>  <span class="muted">© kbasha. All Rights Reserved.</span>  <br>  <br>  <!--img src="/images/scribble2.png" alt="scribble" /--></footer></html>
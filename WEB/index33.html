<html>    <head>    <title>Nodejs搭建WEB项目</title>    <meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'><meta content='text/html; charset=utf-8' http-equiv='content-type' /><link href='/styles/github.css' rel='stylesheet' type='text/css' /><script src='/javascripts/highlight.pack.js' type='text/javascript'></script><link href='/images/kbasha.png' rel='shortcut icon'><link href='/stylesheets/style.css' rel='stylesheet' type='text/css' /><link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css' /><link href='/stylesheets/responsive.css' rel='stylesheet' type='text/css' /><link href="/stylesheets/nprogress.css" rel='stylesheet' type='text/css' /><link href="/stylesheets/duoshuo.css" rel='stylesheet' type='text/css' /><link href="/feed.xml" rel="alternate" type="application/rss+xml"><script src='/javascripts/jquery.js' type='text/javascript'></script><script src='/javascripts/jquery.particleground.min.js' type='text/javascript'></script><script src='/javascripts/nprogress.js' type='text/javascript'></script><script src='/javascripts/theater.js' type='text/javascript'></script><script src='/javascripts/app.js' type='text/javascript'></script><script>    hljs.initHighlightingOnLoad();    var duoshuoQuery = {short_name:"kbasha"};</script>    </head>    <body>        <header><div id="blog-desc">    If you want do, then do.</div></header><div id="main">    <div id="left">    <a id="head-pic" class="go-back-home" href="/"><img src="../images/kbasha.jpg" alt="Home" width="100" height="100"></a>    <p>克巴沙</p>        <ul id="titles" class="titles">                    </ul>    </div>    <div id="right">    <a id="scaner-pic" class="go-back-home" href="/"><img src="../images/kbasha_id.jpg" alt="Home" width="172" height="172"></a>    <p>关注公众号</p>            </div>        <div id='container'>                        <div class="block nav">    <ul>            <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_top" href="/about.html">About</a>        </li>            <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_top" href="/">Blog</a>        </li>        <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_blank" href="https://github.com/kebasha">GitHub</a>        </li>            </ul></div>            <section class="paging">      <div class="left">      <a href="index32.html">        ‹      </a>    </div>      <div class="right">      <a href="index34.html">        ›      </a>    </div>  </section><div class="content">    <section class='post'>        <h1>            AngularJs和Nodejs搭建WEB项目            <div class='date'>2016-04-04 22:16:44</div>        </h1><pre><strong><code>express创建项目</code></strong></pre><pre><code class="bash">$ npm install express###express4以后需要安装express-generator才能使用命令行$ npm install express-generator###使用express创建项目(-e表示页面使用的模板ejs，默认使用jade)$ express -e angularweb$ npm install angular$ npm install angular-ui-router$ npm install mongoose</code></pre><pre><strong><code>angularjs页面环境</code></strong></pre><p style="text-indent:2em;">在public目录下新建controllers、directives、services文件夹，然后将angular.js与angular-ui-router.js放入javascripts目录下面，新建app-angular.js,内容如下:</p><pre><code class="js">var app = angular.module('loveApp',['ui.router']);app.config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider){    $urlRouterProvider.otherwise("/home");    $stateProvider.state('home',{        url:'/home',        templateUrl:'views/home.ejs',        controller: 'homeController'    }).state('project',{        url:'/project',        templateUrl:'views/project.ejs'    }).state('moving',{        url:'/moving',        templateUrl:'views/moving.ejs'    }).state('me',{        url:'/me',        templateUrl:'views/me.ejs'    }).state('/home',{        url:'/home',        templateUrl:'views/home.ejs'    });}]);app.run(['$rootScope', '$location', '$log', function($rootScope, $location, $log){    $rootScope.path = $location.path();    $rootScope.$on('$locationChangeSuccess', function(){        $rootScope.path = $location.path();    });}]);</code></pre><pre><strong><code>NodeJs配置</code></strong></pre><p style="text-indent:2em;">修改app.js，在routes目录下新建web_router.js文件</p><pre><code class="js">/*在app.js中新加路由到web_router.js*/app.use('/', web_router);/*web_router.js*/var express = require('express');var router = express.Router();var index = require('../controllers/index');/* GET home page. */router.get('/', index.index);module.exports = router;</code></pre><pre><strong><code>数据库配置</code></strong></pre><p style="text-indent:2em;">修改app.js，在controllers目录下新建index.js文件，在models文件夹下新建user.js</p><pre><code class="js">/*在app.js中新增如下内容*/var mongoose = require('mongoose');mongoose.connect('mongodb://192.168.3.110/angularweb');/*user.js*/var mongoose = require('mongoose'),    Schema = mongoose.Schema,    ObjectId = Schema.ObjectId;var UserSchema = new Schema({    username: String,    passwd: String});module.exports = mongoose.model('User', UserSchema, 'user');/*index.js*/var User = require('../models/user');exports.index = function(req, res){    User.find(function(err, docs){        if(err){            console.log(err);        }        console.log(docs);        res.render('index', {title: 'MongoDB', data: docs});    });}</code></pre><img src="index33_01.png">                </section>            </div>                    </div></div>        <script>            jQuery(document).ready(function($) {                App.mapKeySupport();                App.initNProgress();                App.initDuoshuo();                App.initTheater();            });        </script>    </body>    <div id="particles">    <canvas class="pg-canvas"></canvas></div><script type="text/javascript">    var _hmt = _hmt || [];    (function() {      var hm = document.createElement("script");      hm.src = "//hm.baidu.com/hm.js?93757bc26a1b57b9c6a7771db256d254";      var s = document.getElementsByTagName("script")[0];       s.parentNode.insertBefore(hm, s);    })();    $(function(){        var $body = $("body");        $("#particles").css({                "width":$body.width(),                 "height":$body.height()            }).particleground({                lineColor: '#e0e0e0',                dotColor: '#EFEFEF',                lineColor: '#EFEFEF',                   minSpeedX :0.5,                maxSpeedX :1,                minSpeedY : 0.5,                maxSpeedY :1            });    });</script><footer>  <span class="muted">© kbasha. All Rights Reserved.</span>  <br>  <br>  <!--img src="/images/scribble2.png" alt="scribble" /--></footer></html>
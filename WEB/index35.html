<html>    <head>    <title>PHP+Nginx+MongoDB环境搭建</title>    <meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'><meta content='text/html; charset=utf-8' http-equiv='content-type' /><link href='/styles/github.css' rel='stylesheet' type='text/css' /><script src='/javascripts/highlight.pack.js' type='text/javascript'></script><link href='/images/kbasha.png' rel='shortcut icon'><link href='/stylesheets/style.css' rel='stylesheet' type='text/css' /><link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css' /><link href='/stylesheets/responsive.css' rel='stylesheet' type='text/css' /><link href="/stylesheets/nprogress.css" rel='stylesheet' type='text/css' /><link href="/stylesheets/duoshuo.css" rel='stylesheet' type='text/css' /><link href="/feed.xml" rel="alternate" type="application/rss+xml"><script src='/javascripts/jquery.js' type='text/javascript'></script><script src='/javascripts/jquery.particleground.min.js' type='text/javascript'></script><script src='/javascripts/nprogress.js' type='text/javascript'></script><script src='/javascripts/theater.js' type='text/javascript'></script><script src='/javascripts/app.js' type='text/javascript'></script><script>    hljs.initHighlightingOnLoad();    var duoshuoQuery = {short_name:"kbasha"};</script>    </head>    <body>        <header><div id="blog-desc">    If you want do, then do.</div></header><div id="main">    <div id="left">    <a id="head-pic" class="go-back-home" href="/"><img src="../images/kbasha.jpg" alt="Home" width="100" height="100"></a>    <p>克巴沙</p>        <ul id="titles" class="titles">                    </ul>    </div>    <div id="right">    <a id="scaner-pic" class="go-back-home" href="/"><img src="../images/kbasha_id.jpg" alt="Home" width="172" height="172"></a>    <p>关注公众号</p>            </div>        <div id='container'>                        <div class="block nav">    <ul>            <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_top" href="/about.html">About</a>        </li>            <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_top" href="/">Blog</a>        </li>        <li>            <span class="line line-top"></span>            <span class="line line-right"></span>            <span class="line line-bottom"></span>            <span class="line line-left"></span>            <a target="_blank" href="https://github.com/kebasha">GitHub</a>        </li>            </ul></div>            <section class="paging">      <div class="left">      <a href="index34.html">        ‹      </a>    </div>      <div class="right">      <a href="index36.html">        ›      </a>    </div>  </section><div class="content">    <section class='post'>        <h1>            PHP+Nginx+MongoDB环境搭建            <div class='date'>2016-04-15 22:23:33</div>        </h1><p><strong><code>PHP安装</code></strong></p><blockquote><p style="text-indent:2em;">这里PHP采用编译安装，适合有一定电脑基础的朋友，这里只是记录一下安装的过程，以便自己做下记录。</p></blockquote><pre><code class="bash">$ tar -zxvf php-5.6.2.tar.gz$ cd php-5.6.2./configure \--prefix=/usr/local/php \--with-config-file-path=/usr/local/php/etc \--enable-fpm \--with-fpm-user=php-fpm \--with-fpm-group=php-fpm \--with-mysql=mysqlnd \                  //这里mysqlnd 是内部查找命令--with-mysql-sock=/tmp/mysql.sock \--with-libxml-dir \--with-gd \--with-jpeg-dir \--with-png-dir \--with-freetype-dir \--with-iconv-dir \--with-zlib-dir \--with-mcrypt \--enable-soap \--enable-gd-native-ttf \--enable-ftp \--enable-mbstring \--enable-exif \--disable-ipv6 \--with-pear \--with-curl \--with-openssl$ make$ make installcp php.ini-production /usr/local/php/etc/php.inicp /usr/local/php/etc/php-fpm.conf.default.conf php-fpm.conf##设置开机启动(复制PHP下载包中的文件)$ cp /tmp/php-5.6.2/sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm$ chmod 755 /etc/init.d/php-fpm$ service php-fpm start$ chkconfig php-fpm on</code></pre><hr><p><strong><code>Nginx安装</code></strong></p><pre><code class="bash">$ tar -zxvf nginx-1.8.1.tar.gz$ cd nginx-1.8.1##更多configure参数参考相关文档$ ./configure --prefix=/usr/local/nginx $ make$ make install##Nginx支持PHP配置##在nginx.conf文件中的server中配置listen       80;server_name  114.215.145.251;   location / {    root        /var/local/www;    index index.html index.htm index.php;}location ~ \.php$ {    fastcgi_pass        127.0.0.1:9000;    fastcgi_index       index.php;    fastcgi_param       SCRIPT_FILENAME /var/local/www/$fastcgi_script_name;    include     fastcgi_params;}##设置Nginx开机启动(参考下面两篇文章)1、https://www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/2、http://www.01happy.com/centos-nginx-shell-chkconfig/##其中文章1为官方提供的脚本##将脚本保存到/etc/init.d/nginx##修改以下两个地方nginx=”/usr/sbin/nginx” 修改成nginx执行程序的路径。NGINX_CONF_FILE=”/etc/nginx/nginx.conf” 修改成配置文件的路径。##保存后，就可以通过该脚本对nginx服务进行管理了$ /etc/init.d/nginx start$ /etc/init.d/nginx stop$ /etc/init.d/nginx reload##使用chkconfig进行管理##先将nginx服务加入chkconfig管理列表$ chkconfig --add /etc/init.d/nginx##加完这个之后，就可以使用service对nginx进行启动，重启等操作了。$ service nginx start$ service nginx stop$ service nginx reload##设置终端模式开机启动：$ chkconfig --level 3 nginx on</code></pre><hr><p><strong><code>PHP安装MongoDB扩展</code></strong></p><pre><code class="bash">##从http://pecl.php.net/package/mongo下载驱动mongo-1.6.13$ tar -zxvf mongo-1.6.13.tgz$ cd mongo-1.6.13$ /usr/local/php/bin/phpize$ ./configure --with-php-config=/usr/local/php/bin/php-config$ make$ make install##安装完后会返回##Installing '/usr/lib/php/extensions/no-debug-non-zts-20060613/mongo.so'$ vi /usr/local/php/lib/php.ini##添加如下内容extension=mongo.so(或者加上全路径)</code></pre>                </section>            </div>                    </div></div>        <script>            jQuery(document).ready(function($) {                App.mapKeySupport();                App.initNProgress();                App.initDuoshuo();                App.initTheater();            });        </script>    </body>    <div id="particles">    <canvas class="pg-canvas"></canvas></div><script type="text/javascript">    var _hmt = _hmt || [];    (function() {      var hm = document.createElement("script");      hm.src = "//hm.baidu.com/hm.js?93757bc26a1b57b9c6a7771db256d254";      var s = document.getElementsByTagName("script")[0];       s.parentNode.insertBefore(hm, s);    })();    $(function(){        var $body = $("body");        $("#particles").css({                "width":$body.width(),                 "height":$body.height()            }).particleground({                lineColor: '#e0e0e0',                dotColor: '#EFEFEF',                lineColor: '#EFEFEF',                   minSpeedX :0.5,                maxSpeedX :1,                minSpeedY : 0.5,                maxSpeedY :1            });    });</script><footer>  <span class="muted">© kbasha. All Rights Reserved.</span>  <br>  <br>  <!--img src="/images/scribble2.png" alt="scribble" /--></footer></html>